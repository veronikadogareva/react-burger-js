{"ast":null,"code":"const BASEURL = \"https://norma.nomoreparties.space/api\";\nexport default class BaseService {\n  static async checkResponse(res) {\n    const data = await res.json();\n    return res.ok ? data : Promise.reject(data);\n  }\n  static async refreshToken() {\n    const res = await fetch(`${BASEURL}/auth/token`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json;charset=utf-8\"\n      },\n      body: JSON.stringify({\n        token: localStorage.getItem(\"refreshToken\")\n      })\n    });\n    const refreshData = await this.checkResponse(res);\n    if (!refreshData.success) {\n      return Promise.reject(refreshData);\n    }\n    localStorage.setItem(\"accessToken\", refreshData.accessToken);\n    localStorage.setItem(\"refreshToken\", refreshData.refreshToken);\n  }\n  static sendRequest(url, options = {}) {\n    return fetch(BASEURL + url, options).then(res => {\n      if (!res.ok) {\n        throw new Error(`Произошла ошибка при выполнении запроса. Код ошибки: ${res.status}`);\n      }\n      return res.json();\n    }).catch(err => {\n      console.error(\"Ошибка запроса:\", err);\n      throw err;\n    });\n  }\n  static getIngredients() {\n    const url = \"/ingredients\";\n    return this.sendRequest(url);\n  }\n  static sendOrder(orderData) {\n    const url = \"/orders\";\n    return this.sendRequest(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(orderData)\n    });\n  }\n}","map":{"version":3,"names":["BASEURL","BaseService","checkResponse","res","data","json","ok","Promise","reject","refreshToken","fetch","method","headers","body","JSON","stringify","token","localStorage","getItem","refreshData","success","setItem","accessToken","sendRequest","url","options","then","Error","status","catch","err","console","error","getIngredients","sendOrder","orderData"],"sources":["C:/Users/dogareva/Documents/GitHub/react-burger-js/src/utils/BaseService.jsx"],"sourcesContent":["const BASEURL = \"https://norma.nomoreparties.space/api\";\r\n\r\nexport default class BaseService {\r\n  static async checkResponse(res) {\r\n    const data = await res.json();\r\n    return res.ok ? data : Promise.reject(data);\r\n  }\r\n  static async refreshToken() {\r\n    const res = await fetch(`${BASEURL}/auth/token`, {\r\n      method:\"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=utf-8\",\r\n      },\r\n      body:JSON.stringify({\r\n        token:localStorage.getItem(\"refreshToken\")\r\n      }),\r\n    });\r\n    const refreshData = await this.checkResponse(res);\r\n    if (!refreshData.success) {\r\n      return Promise.reject(refreshData);\r\n    }\r\n    localStorage.setItem(\"accessToken\", refreshData.accessToken);\r\n    localStorage.setItem(\"refreshToken\", refreshData.refreshToken);\r\n  }\r\n  static sendRequest(url, options = {}) {\r\n    return fetch(BASEURL + url, options)\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          throw new Error(\r\n            `Произошла ошибка при выполнении запроса. Код ошибки: ${res.status}`\r\n          );\r\n        }\r\n        return res.json();\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Ошибка запроса:\", err);\r\n        throw err;\r\n      });\r\n  }\r\n  static getIngredients() {\r\n    const url = \"/ingredients\";\r\n    return this.sendRequest(url);\r\n  }\r\n  static sendOrder(orderData) {\r\n    const url = \"/orders\";\r\n    return this.sendRequest(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(orderData),\r\n    });\r\n  }\r\n}\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAG,uCAAuC;AAEvD,eAAe,MAAMC,WAAW,CAAC;EAC/B,aAAaC,aAAaA,CAACC,GAAG,EAAE;IAC9B,MAAMC,IAAI,GAAG,MAAMD,GAAG,CAACE,IAAI,CAAC,CAAC;IAC7B,OAAOF,GAAG,CAACG,EAAE,GAAGF,IAAI,GAAGG,OAAO,CAACC,MAAM,CAACJ,IAAI,CAAC;EAC7C;EACA,aAAaK,YAAYA,CAAA,EAAG;IAC1B,MAAMN,GAAG,GAAG,MAAMO,KAAK,CAAC,GAAGV,OAAO,aAAa,EAAE;MAC/CW,MAAM,EAAC,MAAM;MACbC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAACC,IAAI,CAACC,SAAS,CAAC;QAClBC,KAAK,EAACC,YAAY,CAACC,OAAO,CAAC,cAAc;MAC3C,CAAC;IACH,CAAC,CAAC;IACF,MAAMC,WAAW,GAAG,MAAM,IAAI,CAACjB,aAAa,CAACC,GAAG,CAAC;IACjD,IAAI,CAACgB,WAAW,CAACC,OAAO,EAAE;MACxB,OAAOb,OAAO,CAACC,MAAM,CAACW,WAAW,CAAC;IACpC;IACAF,YAAY,CAACI,OAAO,CAAC,aAAa,EAAEF,WAAW,CAACG,WAAW,CAAC;IAC5DL,YAAY,CAACI,OAAO,CAAC,cAAc,EAAEF,WAAW,CAACV,YAAY,CAAC;EAChE;EACA,OAAOc,WAAWA,CAACC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IACpC,OAAOf,KAAK,CAACV,OAAO,GAAGwB,GAAG,EAAEC,OAAO,CAAC,CACjCC,IAAI,CAAEvB,GAAG,IAAK;MACb,IAAI,CAACA,GAAG,CAACG,EAAE,EAAE;QACX,MAAM,IAAIqB,KAAK,CACb,wDAAwDxB,GAAG,CAACyB,MAAM,EACpE,CAAC;MACH;MACA,OAAOzB,GAAG,CAACE,IAAI,CAAC,CAAC;IACnB,CAAC,CAAC,CACDwB,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEF,GAAG,CAAC;MACrC,MAAMA,GAAG;IACX,CAAC,CAAC;EACN;EACA,OAAOG,cAAcA,CAAA,EAAG;IACtB,MAAMT,GAAG,GAAG,cAAc;IAC1B,OAAO,IAAI,CAACD,WAAW,CAACC,GAAG,CAAC;EAC9B;EACA,OAAOU,SAASA,CAACC,SAAS,EAAE;IAC1B,MAAMX,GAAG,GAAG,SAAS;IACrB,OAAO,IAAI,CAACD,WAAW,CAACC,GAAG,EAAE;MAC3Bb,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACoB,SAAS;IAChC,CAAC,CAAC;EACJ;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}